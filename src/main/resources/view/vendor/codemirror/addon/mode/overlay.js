!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(CodeMirror){"use strict";CodeMirror.overlayMode=function(e,o,r){return{startState:function(){return{base:CodeMirror.startState(e),overlay:CodeMirror.startState(o),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(r){return{base:CodeMirror.copyState(e,r.base),overlay:CodeMirror.copyState(o,r.overlay),basePos:r.basePos,baseCur:null,overlayPos:r.overlayPos,overlayCur:null}},token:function(a,n){return(a!=n.streamSeen||Math.min(n.basePos,n.overlayPos)<a.start)&&(n.streamSeen=a,n.basePos=n.overlayPos=a.start),a.start==n.basePos&&(n.baseCur=e.token(a,n.base),n.basePos=a.pos),a.start==n.overlayPos&&(a.pos=a.start,n.overlayCur=o.token(a,n.overlay),n.overlayPos=a.pos),a.pos=Math.min(n.basePos,n.overlayPos),null==n.overlayCur?n.baseCur:null!=n.baseCur&&n.overlay.combineTokens||r&&null==n.overlay.combineTokens?n.baseCur+" "+n.overlayCur:n.overlayCur},indent:e.indent&&function(o,r){return e.indent(o.base,r)},electricChars:e.electricChars,innerMode:function(o){return{state:o.base,mode:e}},blankLine:function(r){e.blankLine&&e.blankLine(r.base),o.blankLine&&o.blankLine(r.overlay)}}}});